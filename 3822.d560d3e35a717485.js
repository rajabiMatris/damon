"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3822],{3822:(W,v,u)=>{u.r(v),u.d(v,{CitizenVoiceModule:()=>S});var m=u(9808),p=u(4182),c=u(4030),a=u(5362),T=u(3552),F=u(8530),I=u(4466),z=u(3563),e=u(9863),h=u(6078),A=u(3071),b=u(6475),g=u(1454),f=u(4879),D=u(9337),G=u(5757),U=u(713);let N=(()=>{class n{constructor(t,o,i,s){var l,d;this.router=t,this.bs=o,this.user=i,this.app=s,this.model=new z.E,this.formData=new FormData,this.info=null===(d=null===(l=this.router.getCurrentNavigation())||void 0===l?void 0:l.extras)||void 0===d?void 0:d.state,this.info?this.model.CatId=this.info.id:this.router.navigate(["home/CitizenVoice/create"])}ngOnInit(){this.bindFormGroup()}bindFormGroup(){this.formGroup=new p.cw({Description:new p.NI(void 0,p.kI.required)})}saveForm(){if(!this.formGroup.valid)return this.app.presentToast("\u062a\u0648\u0636\u06cc\u062d\u0627\u062a \u0631\u0627 \u067e\u0631 \u06a9\u0646\u06cc\u062f!","danger");for(const i in this.formGroup.value)this.formGroup.value[i]&&(this.model[i]=this.formGroup.value[i]);this.model.Share=!0,this.model.UserId=this.user.getUserId,console.log(this.model);const t=JSON.stringify(this.model),o=new Blob([t],{type:"application/json"});this.formData.append("model",o),this.bs.voice(this.formData).then(i=>{console.log(i),i.Status?this.app.presentToast("\u0639\u0645\u0644\u06cc\u0627\u062a \u0628\u0627 \u0645\u0648\u0641\u0642\u06cc\u062a \u0627\u0646\u062c\u0627\u0645 \u0634\u062f","success"):this.app.presentToast("\u0639\u0645\u0644\u06cc\u0627\u062a \u0646\u0627\u0645\u0648\u0641\u0642","danger")})}setLocation(t){this.model.Location=t?`${t.lat},${t.lng}`:void 0}setFile(t){t&&(this.formData=t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.F0),e.Y36(h.YD),e.Y36(A.K),e.Y36(b.z))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-citizen-add"]],decls:16,vars:2,consts:[["title","\u0635\u062f\u0627\u06cc \u0634\u0647\u0631\u0648\u0646\u062f","defaultHref","home/CitizenVoice/create"],["fileType",".png, .jpg","label","\u0639\u06a9\u0633 \u0645\u0631\u0628\u0648\u0637\u0647 \u0631\u0627 \u062f\u0631 \u0627\u06cc\u0646 \u0642\u0633\u0645\u062a \u0622\u067e\u0644\u0648\u062f \u0646\u0645\u0627\u06cc\u06cc\u062f","fileLabelAfterSelect","\u0639\u06a9\u0633 \u0634\u0645\u0627",3,"uploadedFiles"],[3,"latlong"],[1,"submitBox"],[3,"formGroup","submit"],[1,"topLabel"],["lines","none",1,"textarea"],["position","floating"],["formControlName","Description","placeholder","\u0645\u062a\u0646 \u0634\u06a9\u0627\u06cc\u062a...","rows","5"],["type","submit","color","primary",1,"med"],["load",""]],template:function(t,o){1&t&&(e._UZ(0,"app-shared-back",0),e.TgZ(1,"app-wrapper")(2,"file-uploader",1),e.NdJ("uploadedFiles",function(s){return o.setFile(s)}),e.qZA(),e.TgZ(3,"app-map",2),e.NdJ("latlong",function(s){return o.setLocation(s)}),e.qZA(),e.TgZ(4,"ion-row",3)(5,"form",4),e.NdJ("submit",function(){return o.saveForm()}),e.TgZ(6,"ion-label",5),e._uU(7),e.qZA(),e.TgZ(8,"ion-item",6)(9,"ion-label",7),e._uU(10,"\u062a\u0648\u0636\u06cc\u062d\u0627\u062a"),e.qZA(),e._UZ(11,"ion-textarea",8),e.qZA(),e.TgZ(12,"area-spinner")(13,"ion-button",9,10),e._uU(15,"\u062b\u0628\u062a \u0648 \u0627\u0631\u0633\u0627\u0644"),e.qZA()()()()()),2&t&&(e.xp6(5),e.Q6J("formGroup",o.formGroup),e.xp6(2),e.Oqu(null==o.info?null:o.info.name))},directives:[g.A,f.A,D.G,G.G,a.Nd,p._Y,p.JL,p.sg,a.Q$,a.Ie,a.g2,a.j9,p.JJ,p.u,U.f,a.YG],styles:[".topLabel[_ngcontent-%COMP%]{font-size:.75em;text-align:center;display:block;width:100%}"]}),n})();var Z=u(655),B=u(5055);const M=["accordionGroup"],Y=function(n,r){return{id:n,name:r}};function O(n,r){if(1&n&&(e.TgZ(0,"ion-label",13),e._uU(1),e.qZA()),2&n){const t=r.$implicit;e.Q6J("state",e.WLB(2,Y,t.Id,t.Name)),e.xp6(1),e.hij(" ",t.Name,"")}}function J(n,r){if(1&n&&(e.TgZ(0,"ion-accordion",9)(1,"ion-item",10)(2,"ion-label"),e._uU(3),e.qZA()(),e.TgZ(4,"div",11),e.YNc(5,O,2,5,"ion-label",12),e.qZA()()),2&n){const t=r.$implicit,o=e.oxw();e.Q6J("value",t.Id),e.xp6(3),e.Oqu(t.Name),e.xp6(2),e.Q6J("ngForOf",t.groupedItems)("ngForTrackBy",o.trackBy)}}function V(n,r){1&n&&e._UZ(0,"app-no-content",14)}let x=(()=>{class n{constructor(t,o){this.bs=t,this.ref=o,this.getCatoryWarning=()=>(0,Z.mG)(this,void 0,void 0,function*(){return this.bs.getCatoryWarning().then(i=>{this.category=this.groupBy(i),this.renderItems=this.category,console.log(i,this.category),this.ref.detectChanges()}).catch(i=>{console.log(i)})})}ngOnInit(){this.getCatoryWarning()}groupBy(t){const o=[];let i;return t.forEach(s=>{"0"!==s.Type?i.groupedItems.push(s):(i&&o.push(i),i=s,i.groupedItems=[])}),o}filter(t){const o=t.target.value;if(o){const i=[],s=[];this.category.forEach((l,d)=>{const C=[];l.groupedItems.forEach(y=>{y.Name.includes(o)&&C.push(y)}),C.length?(i.push({Id:l.Id,Name:l.Name,Select:l.Select,Type:l.Type,groupedItems:C}),s.push(l.Id.toString())):i.splice(d)}),this.accordionGroup.multiple=!0,this.accordionGroup.value=s,this.renderItems=i,this.ref.detectChanges()}else this.accordionGroup.multiple=!1,this.accordionGroup.value="",this.ref.detectChanges(),setTimeout(()=>{this.renderItems=this.category,this.ref.detectChanges()},5)}trackBy(t,o){return o.Id}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.YD),e.Y36(e.sBO))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-citizen-create"]],viewQuery:function(t,o){if(1&t&&e.Gf(M,7),2&t){let i;e.iGM(i=e.CRH())&&(o.accordionGroup=i.first)}},decls:10,vars:4,consts:[["title","\u062f\u0633\u062a\u0647 \u0628\u0646\u062f\u06cc","defaultHref","home/CitizenVoice"],[3,"fetchData"],["href","tel:137",1,"none"],["color","primary",1,"med"],["animated","","mode","md","placeholder","\u062c\u0633\u062a\u062c\u0648",3,"ionInput"],[1,"box"],["accordionGroup",""],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["class","notInWrapper",4,"ngIf"],[3,"value"],["slot","header"],["slot","content"],["routerLink","add",3,"state",4,"ngFor","ngForOf","ngForTrackBy"],["routerLink","add",3,"state"],[1,"notInWrapper"]],template:function(t,o){1&t&&(e._UZ(0,"app-shared-back",0),e.TgZ(1,"app-wrapper",1)(2,"a",2)(3,"ion-button",3),e._uU(4,"\u062a\u0645\u0627\u0633 \u0628\u0627 137"),e.qZA()(),e.TgZ(5,"ion-searchbar",4),e.NdJ("ionInput",function(s){return o.filter(s)}),e.qZA(),e.TgZ(6,"ion-accordion-group",5,6),e.YNc(8,J,6,4,"ion-accordion",7),e.qZA(),e.YNc(9,V,1,0,"app-no-content",8),e.qZA()),2&t&&(e.xp6(1),e.Q6J("fetchData",o.getCatoryWarning),e.xp6(7),e.Q6J("ngForOf",o.renderItems)("ngForTrackBy",o.trackBy),e.xp6(1),e.Q6J("ngIf",!(null!=o.renderItems&&o.renderItems.length)))},directives:[g.A,f.A,a.YG,a.VI,a.j9,a.eh,m.sg,a.We,a.Ie,a.Q$,a.YI,c.rH,m.O5,B.O],styles:[""],changeDetection:0}),n})();var Q=u(8961);function j(n,r){if(1&n&&(e.TgZ(0,"ion-card")(1,"div",5)(2,"div",6),e._UZ(3,"app-api-img",7),e.qZA(),e.TgZ(4,"div",8)(5,"ion-label"),e._uU(6),e.qZA(),e.TgZ(7,"ion-label"),e._uU(8),e.qZA(),e.TgZ(9,"ion-text"),e._uU(10),e.qZA()()(),e.TgZ(11,"div",9)(12,"ion-label"),e._uU(13),e.qZA(),e.TgZ(14,"ion-label",10),e._uU(15),e.qZA(),e.TgZ(16,"ion-label",10),e._uU(17),e.qZA()()()),2&n){const t=r.$implicit;e.xp6(3),e.Q6J("src",t.FileAttach),e.xp6(3),e.hij("\u06a9\u062f \u067e\u06cc\u06af\u06cc\u0631\u06cc: ",t.Code,""),e.xp6(2),e.hij("\u0645\u0648\u0636\u0648\u0639: ",t.Catgory,""),e.xp6(2),e.hij(" \u062a\u0648\u0636\u06cc\u062d\u0627\u062a: ",t.Decription," "),e.xp6(3),e.hij("\u062a\u0627\u0631\u06cc\u062e: ",t.Date,""),e.xp6(2),e.Oqu(t.SumerryResponse?t.SumerryResponse:t.Response),e.xp6(2),e.hij("\u0627\u0645\u062a\u06cc\u0627\u0632: ",t.Rating," \u0627\u0632 5")}}const L=[{path:"",children:[{path:"",component:(()=>{class n{constructor(t,o){this.bs=t,this.user=o,this.loadMoreData={page:1,finishedData:!1},this.getVoiceMe=()=>(0,Z.mG)(this,void 0,void 0,function*(){return this.bs.getVoiceMe(this.loadMoreData.page,this.user.getUserId).then(i=>(1===this.loadMoreData.page&&(this.items=[]),this.items.push(...i),console.log(i),Boolean(i.length))).catch(i=>{console.log(i)})})}ngOnInit(){this.getVoiceMe()}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(h.YD),e.Y36(A.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-citizen-voice"]],decls:6,vars:4,consts:[["title","\u06af\u0632\u0627\u0631\u0634 \u0647\u0627\u06cc \u0645\u0646","defaultHref","home"],[3,"isNoContent","loadMoreData","fetchData"],["routerLink","create","color","primary",1,"med"],[1,"postBox"],[4,"ngFor","ngForOf"],[1,"middle"],[1,"img"],[3,"src"],[1,"textCon"],[1,"bottom"],[1,"green"]],template:function(t,o){1&t&&(e._UZ(0,"app-shared-back",0),e.TgZ(1,"app-wrapper",1)(2,"ion-button",2),e._uU(3,"\u062b\u0628\u062a \u062f\u0631\u062e\u0648\u0627\u0633\u062a 137"),e.qZA(),e.TgZ(4,"ion-row",3),e.YNc(5,j,18,7,"ion-card",4),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("isNoContent",!(void 0!==o.items&&o.items.length))("loadMoreData",o.loadMoreData)("fetchData",o.getVoiceMe),e.xp6(4),e.Q6J("ngForOf",o.items))},directives:[g.A,f.A,a.YG,a.YI,c.rH,a.Nd,m.sg,a.PM,Q.m,a.Q$,a.yW],styles:[".postBox[_ngcontent-%COMP%]   ion-card[_ngcontent-%COMP%]   .middle[_ngcontent-%COMP%]{height:6em}"]}),n})()},{path:"create",children:[{path:"",component:x},{path:"add",component:N}]}]}];let S=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[],imports:[[m.ez,a.Pc,I.m,c.Bz.forChild(L),p.UX,F.c,T.R],c.Bz]}),n})()}}]);